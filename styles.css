:root {
  --bg:#050d1a;
  --bg-gradient:#0c1a2f;
  --surface:#101b2d;
  --surface-alt:#16253b;
  --surface-soft:#1b2e48;
  --border:#1f3554;
  --border-strong:#28476c;
  --text:#f3f7ff;
  --text-muted:#95a7c4;
  --accent:#1dd1a1;
  --accent-soft:#31e0b2;
  --accent-glow:rgba(49,224,178,0.25);
  --ok:#34d399;
  --warn:#fbbf24;
  --err:#f87171;
}

* { box-sizing:border-box; }

body {
  margin:0;
  font-family:"Inter", "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background:radial-gradient(circle at top, rgba(49,224,178,0.12), transparent 55%), linear-gradient(180deg, var(--bg-gradient), var(--bg));
  color:var(--text);
  min-height:100vh;
}

.app-header {
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  gap:24px;
  padding:28px clamp(20px,4vw,48px) 18px;
  position:sticky;
  top:0;
  z-index:20;
  background:rgba(5,13,26,0.92);
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(49,224,178,0.15);
}

.header-brand h1 {
  margin:0;
  font-family:"Poppins", sans-serif;
  font-size:28px;
  font-weight:600;
  letter-spacing:0.5px;
}

.header-brand p { margin:8px 0 0; max-width:480px; line-height:1.5; }

.header-controls {
  display:flex;
  flex-direction:column;
  gap:16px;
  align-items:flex-end;
  min-width:280px;
}

.week-controls,
.auth-controls {
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:flex-end;
}

.app-main {
  display:flex;
  flex-direction:column;
  gap:32px;
  padding:0 clamp(20px,5vw,64px) 64px;
  min-height:calc(100vh - 200px);
}

.view-tabs {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:16px;
  padding-top:16px;
}

.tab {
  background:var(--surface-alt);
  border:1px solid var(--border);
  color:var(--text-muted);
  padding:12px 28px;
  border-radius:18px;
  letter-spacing:0.3px;
  text-transform:uppercase;
  font-weight:600;
  transition:background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

.tab:hover,
.tab:focus-visible {
  background:rgba(29,209,161,0.12);
  color:var(--text);
  box-shadow:0 16px 32px rgba(29,209,161,0.16);
}

.tab.active {
  background:linear-gradient(135deg, var(--accent), var(--accent-soft));
  color:#05121f;
  box-shadow:0 20px 40px rgba(29,209,161,0.25);
  border-color:transparent;
}

.view-panel {
  display:none;
  flex:1;
  width:100%;
}

.view-panel.active {
  display:flex;
  flex-direction:column;
}

.panel-inner {
  width:100%;
  max-width:1200px;
  margin:0 auto;
  display:flex;
  flex-direction:column;
  gap:32px;
  padding:0 0 48px;
}

.card {
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:22px;
  padding:26px clamp(18px,3vw,32px);
  box-shadow:0 24px 48px rgba(0,0,0,0.25);
}

.summary-card {
  display:flex;
  flex-direction:column;
  gap:28px;
}

.summary-card,
.settings-card { height:100%; }

.summary-header {
  display:flex;
  flex-wrap:wrap;
  align-items:flex-end;
  justify-content:space-between;
  gap:24px;
}

.summary-header h2 {
  margin:0;
  font-family:"Poppins", sans-serif;
  font-size:24px;
  font-weight:600;
}

.tag {
  display:inline-flex;
  align-items:center;
  gap:8px;
  margin-top:10px;
  padding:6px 14px;
  border-radius:999px;
  background:rgba(29,209,161,0.08);
  border:1px solid rgba(29,209,161,0.3);
  font-size:12px;
  font-weight:600;
  letter-spacing:0.4px;
  text-transform:uppercase;
  color:var(--accent);
}

.highlight-group {
  display:flex;
  flex-wrap:wrap;
  gap:16px;
}

.highlight-card {
  min-width:180px;
  padding:18px 22px;
  border-radius:18px;
  background:var(--surface-alt);
  border:1px solid rgba(29,209,161,0.18);
  box-shadow:0 18px 40px rgba(29,209,161,0.08);
}

.highlight-label { color:var(--text-muted); font-size:13px; letter-spacing:0.4px; text-transform:uppercase; }

.highlight-value {
  display:block;
  margin-top:8px;
  font-size:30px;
  font-weight:700;
  font-family:"Poppins", sans-serif;
}

.progress-wrapper { margin-top:-6px; }

.progress {
  height:12px;
  border-radius:999px;
  border:1px solid rgba(29,209,161,0.3);
  background:var(--surface-alt);
  overflow:hidden;
}

.progress > span {
  display:block;
  height:100%;
  width:0;
  background:linear-gradient(90deg, var(--accent), var(--accent-soft));
  box-shadow:0 0 16px var(--accent-glow);
}

.summary-panels {
  display:grid;
  gap:22px;
  grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
}

.panel {
  background:var(--surface-alt);
  border-radius:20px;
  padding:22px;
  border:1px solid var(--border);
  display:flex;
  flex-direction:column;
  gap:18px;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
}

.panel header {
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:12px;
}

.panel h3 {
  margin:0;
  font-family:"Poppins", sans-serif;
  font-size:18px;
  font-weight:600;
}

.stat-grid {
  display:grid;
  gap:14px;
  grid-template-columns:repeat(auto-fit, minmax(160px,1fr));
}

.stat-grid.compact { grid-template-columns:repeat(auto-fit, minmax(140px,1fr)); }

.stat {
  border-radius:16px;
  border:1px solid rgba(255,255,255,0.05);
  background:var(--surface-soft);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.stat .label {
  color:var(--text-muted);
  font-size:13px;
  font-weight:600;
  letter-spacing:0.3px;
  text-transform:uppercase;
}

.stat .value {
  font-size:24px;
  font-weight:700;
  font-family:"Poppins", sans-serif;
}

.stat-subtext { font-size:12px; color:var(--text-muted); }

.settings-card h2 {
  margin:0 0 20px;
  font-family:"Poppins", sans-serif;
  font-size:22px;
  font-weight:600;
}

.form-group {
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-bottom:28px;
}

.help-text { font-size:13px; color:var(--text-muted); line-height:1.6; }

.rules-editor {
  background:var(--surface-soft);
  border:1px solid var(--border);
  border-radius:18px;
  padding:14px;
  max-height:280px;
  overflow:auto;
  font-size:13px;
  line-height:1.5;
}

.rules-editor code { display:block; white-space:pre-wrap; font-family:"SFMono-Regular", Consolas, "Liberation Mono", monospace; color:#cde9ff; }

.small-print { font-size:12px; color:var(--text-muted); line-height:1.6; }

.events-card { display:flex; flex-direction:column; gap:20px; flex:1; }

.section-heading {
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  align-items:flex-start;
  gap:16px;
}

.section-heading h2 {
  margin:0;
  font-family:"Poppins", sans-serif;
  font-size:22px;
}

.muted { color:var(--text-muted); }

.row {
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:center;
}

.row.compact { gap:10px; }

button,
input,
select {
  font-family:"Inter", sans-serif;
  font-size:14px;
  border-radius:14px;
  border:1px solid var(--border-strong);
  padding:10px 14px;
  background:var(--surface-soft);
  color:var(--text);
  transition:transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

input, select { min-width:160px; }

input::placeholder { color:rgba(255,255,255,0.4); }

button { cursor:pointer; font-weight:600; }

button:hover,
select:focus,
input:focus {
  transform:translateY(-1px);
  box-shadow:0 12px 24px rgba(29,209,161,0.18);
  border-color:rgba(29,209,161,0.6);
  outline:none;
}

.btn-primary {
  background:linear-gradient(135deg, var(--accent), #0ea37a);
  border-color:transparent;
  color:#05121f;
  box-shadow:0 16px 30px rgba(29,209,161,0.28);
}

.btn-primary:hover { box-shadow:0 20px 34px rgba(29,209,161,0.32); transform:translateY(-2px); }

.btn-ghost {
  background:rgba(29,209,161,0.1);
  border-color:transparent;
  color:var(--accent);
}

.btn-ghost:hover {
  background:rgba(29,209,161,0.18);
  box-shadow:none;
}

.legend {
  display:flex;
  flex-wrap:wrap;
  gap:24px;
  padding:18px;
  border:1px solid var(--border);
  border-radius:18px;
  background:var(--surface-alt);
}

.legend-title {
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:0.5px;
  font-weight:700;
  color:var(--text-muted);
}

.legend-group {
  display:flex;
  flex-wrap:wrap;
  gap:14px;
  margin-top:10px;
}

.legend-item {
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  font-weight:600;
}

.legend-dot { width:12px; height:12px; border-radius:50%; }
.legend-dot.green { background:#22c55e; }
.legend-dot.yellow { background:#facc15; }
.legend-dot.red { background:#ef4444; }
.legend-dot.blue { background:#38bdf8; }
.legend-dot.gray { background:#64748b; }
.legend-dot.orange { background:#f97316; }
.legend-dot.purple { background:#a855f7; }

.filters-panel {
  display:grid;
  gap:18px;
  grid-template-columns:repeat(auto-fit, minmax(220px,1fr));
  align-items:start;
}

.chip-group {
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:10px;
}

.chip {
  padding:8px 16px;
  border-radius:999px;
  border:1px solid var(--border-strong);
  background:var(--surface);
  font-size:12px;
  letter-spacing:0.4px;
  text-transform:uppercase;
  font-weight:700;
  color:var(--text-muted);
  cursor:pointer;
  transition:all 0.2s ease;
}

.chip.active {
  background:var(--accent);
  border-color:var(--accent);
  color:#031524;
  box-shadow:0 14px 30px rgba(29,209,161,0.32);
}

.table-actions {
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.table-container {
  overflow:auto;
  border:1px solid var(--border);
  border-radius:18px;
  background:var(--surface-alt);
}

table {
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  font-size:14px;
  min-width:720px;
}

thead th {
  position:sticky;
  top:0;
  background:rgba(15,35,56,0.95);
  border-bottom:1px solid var(--border-strong);
  padding:14px 16px;
  text-align:left;
  font-weight:600;
  color:var(--text-muted);
  letter-spacing:0.4px;
  font-size:12px;
  text-transform:uppercase;
}

tbody tr { transition:background 0.2s ease; }

tbody tr:nth-child(odd) { background:rgba(255,255,255,0.02); }

tbody tr:nth-child(even) { background:rgba(29,209,161,0.03); }

td {
  padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,0.04);
  color:var(--text);
}

tbody tr:hover { background:rgba(49,224,178,0.08); }

.pill {
  font-size:12px;
  font-weight:700;
  padding:6px 12px;
  border-radius:999px;
  border:1px solid transparent;
  display:inline-flex;
  align-items:center;
  gap:6px;
}

.pill.green { background:rgba(34,197,94,0.15); color:#bbf7d0; }
.pill.orange { background:rgba(251,146,60,0.18); color:#fed7aa; }
.pill.purple { background:rgba(168,85,247,0.2); color:#e9d5ff; }
.pill.red { background:rgba(239,68,68,0.18); color:#fecaca; }
.pill.yellow { background:rgba(250,204,21,0.18); color:#fef08a; }
.pill.blue { background:rgba(56,189,248,0.2); color:#bae6fd; }
.pill.gray { background:rgba(148,163,184,0.2); color:#e2e8f0; }

.subtotal-row {
  background:rgba(29,209,161,0.12) !important;
  font-weight:600;
}

.subtotal-row td { border-top:1px solid rgba(255,255,255,0.12); }

.loading-indicator {
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(5,13,26,0.78);
  backdrop-filter:blur(8px);
  z-index:9999;
  color:#fff;
  font-weight:600;
  font-size:18px;
}

.loading-indicator .spinner {
  width:28px;
  height:28px;
  border-radius:50%;
  border:3px solid rgba(255,255,255,0.25);
  border-top-color:#fff;
  margin-right:12px;
  animation:spin 1s linear infinite;
}

.loading-indicator .label { display:flex; align-items:center; }

.hidden { display:none !important; }

@keyframes spin { to { transform:rotate(360deg); } }

body.print-friendly header,
body.print-friendly .settings-card,
body.print-friendly .filters-panel,
body.print-friendly .legend,
body.print-friendly .header-controls,
body.print-friendly .section-heading,
body.print-friendly .view-tabs { display:none !important; }

body.print-friendly .app-main { margin:0; padding:0 10px 32px; display:block; }
body.print-friendly .view-panel.active { display:block; }
body.print-friendly .panel-inner { max-width:none; }

body.print-friendly .card { box-shadow:none; border-radius:0; border:0; background:#fff; color:#000; }

body.print-friendly table th,
body.print-friendly table td { border-color:#ccc; color:#000; }

@media (max-width:860px) {
  .header-controls { align-items:flex-start; width:100%; }
  .app-header { align-items:flex-start; }
  .week-controls, .auth-controls { justify-content:flex-start; }
}

@media (max-width:640px) {
  .app-header { padding:22px 18px 16px; }
  .app-main { padding:0 18px 32px; gap:24px; }
  .view-tabs { justify-content:stretch; gap:12px; }
  .tab { flex:1 1 100%; text-align:center; }
  .card { padding:22px 20px; }
  .highlight-value { font-size:26px; }
  input, select { min-width:unset; flex:1; }
}
